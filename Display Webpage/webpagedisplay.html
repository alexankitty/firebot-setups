<div id="container" style="height: 100%;width: 100%" class="frame$presetListArg[webId]">
    <iframe title="overlay" id="htmlframe$presetListArg[webId]" src="$encodeForHtml[$presetListArg[URL]]?$encodeForHtml[$presetListArg[URLParams]]" height="$encodeForHtml[$presetListArg[Height]]" width="$encodeForHtml[$presetListArg[Width]]" style="position: absolute;" frameBorder="0"></iframe>
    <script type="text/javascript">
        const removeEmptyLines = str => str.split(/\r?\n/).filter(line => line.trim() !== '').join('\n');
        const cssCheck = str => ["cm", "mm", "in", "px", "pt", "pc", "em", "ex", "ch", "rem", "vw", "vh", "vmin", "vmax", "%"].reduce((a,c) => a + str.includes(c), 0) == 1;
        function setFrameStyles(x, y, anchor, width, height) {
            let htmlframe = document.getElementById("container");
            let frame = document.getElementById("htmlframe$presetListArg[webId]")
            let centerAdj = (width / 2) - (x / 2)
            let middleAdj = (height / 2) - (y / 2)
            if (x == "") x = 0
            if (y == "") y = 0
            if (width == "") width = 300
            if (height == "") height = 150
            if (typeof(width) == "number") width += "px"
            if (typeof(height) == "number") height += "px"
            if (typeof(width) == "string"){
                if(!cssCheck(width)) width += "px"
            }
            if (typeof(height) == "string"){
                if(!cssCheck(height)) height += "px"
            }
            if (typeof(x) == "number") x += "px"
            if (typeof(y) == "number") y += "px"
            if (typeof(x) == "string"){
                if(!cssCheck(x)) x += "px"
            }
            if (typeof(y) == "string"){
                if(!cssCheck(y)) y += "px"
            }
            if (anchor == "") anchor = "topleft"
            anchor = anchor.toLowerCase()
            styleOverride=document.createElement('style')
            styleOverride.innerHTML=`
                #htmlframe$presetListArg[webId]{
                    ${anchor.includes("top") ? `top: ${y};` : ""}
                    ${anchor.includes("bottom") ? `bottom: ${y};` : ""}
                    ${anchor.includes("middle") ? `top: calc(50% - calc(calc(${height} / 2) - calc(${y} / 2)));` : ""}
                    ${anchor.includes("left") ? `left: ${x};` : ""}
                    ${anchor.includes("right") ? `right: ${x};` : ""}
                    ${anchor.includes("center") ? `left: calc(50% - calc(calc(${width} / 2) - calc(${x} / 2)));` : ""}
                }
            `
            styleOverride.innerHTML = removeEmptyLines(styleOverride.innerHTML)
            htmlframe.appendChild(styleOverride);
        }
        setFrameStyles("$encodeForHtml[$presetListArg[X]]", "$encodeForHtml[$presetListArg[Y]]" , "$encodeForHtml[$presetListArg[Anchor]]", "$encodeForHtml[$presetListArg[Width]]", "$encodeForHtml[$presetListArg[Height]]")
    </script>
</div>

